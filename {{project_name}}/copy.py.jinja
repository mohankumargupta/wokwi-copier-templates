import sys
import shutil
from pathlib import Path

def main():
    build_base = Path(f".esphome/build/{{project_name}}/.pio/build/{{project_name}}")
    firmware_bin = "firmware.factory.bin"
    firmware_elf = "firmware.elf"
    firmware_bin_full_path = build_base / firmware_bin 
    firmware_elf_full_path = build_base / firmware_elf
    dest_dir = Path("firmware")
    dest_dir.mkdir(exist_ok=True)
    shutil.copy2(firmware_bin_full_path, dest_dir / firmware_bin)
    shutil.copy2(firmware_elf_full_path / firmware_elf)
